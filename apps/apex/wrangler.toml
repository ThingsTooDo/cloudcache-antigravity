name = "apex-worker"
main = "dist/index.mjs"
compatibility_date = "2025-10-07"

# Production routes
routes = [
  { pattern = "cloudcache.ai/*", zone_name = "cloudcache.ai" },
  { pattern = "www.cloudcache.ai/*", zone_name = "cloudcache.ai" }
]

# Remote bindings for local dev (no .dev.vars needed)
# Note: remote bindings are enabled by default in Wrangler v4
[dev]
port = 8788

# Staging environment
[env.staging]
name = "apex-worker-staging"
routes = [
  { pattern = "staging-apex.cloudcache.ai/*", zone_name = "cloudcache.ai" }
]

# Preview environment
[env.preview]
name = "apex-worker-preview"
workers_dev = true
routes = []

# Pages configuration for Astro SSR
# Note: Pages project should be created separately via scripts/cloudcache bootstrap
# Build output directory should match Astro adapter output (.astro/output or .output/public)
